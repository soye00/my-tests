<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ICECARE 예약하기</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" href="ex01.css">
  <link rel="stylesheet" href="css/reservationmedia.css">
  <link rel="stylesheet" href="./css/common.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
  <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const supabaseUrl = 'https://wqetnltlnsvjidubewia.supabase.co';
    const supabasePassword = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndxZXRubHRsbnN2amlkdWJld2lhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI3NzI5NDksImV4cCI6MjA1ODM0ODk0OX0.-Jw0jqyq93rA7t194Kq4_umPoTci8Eqx9j-oCwoZc6k";

    var supabase = window.supabase.createClient(supabaseUrl, supabasePassword);
  </script>



</head>
<body>
<nav>
  <a href="reservation.html" class="logo">
    <img src="image/logo.png" alt="로고 이미지">
  </a>
  <ul class="nav-links">
    <!--링크연결하기-->
    <li><a class="hoho" style="line-height: 40px" href="reservation.html">예약하기</a></li>
    <li><a class="hoho" style="line-height: 40px" href="reservationInquiry.html">예약조회</a></li>
    <li class="gomain"><a style="color: white; line-height: 40px; font-weight: 500;" href="index.html">MAIN PAGE</a></li>
  </ul>
  <div class="hamburger" onclick="slideMenu()">
    <i class="fas fa-bars"></i> <!-- 햄버거 아이콘 -->
  </div>
</nav>
<div class="m-nav-links">
  <div class="close-btn" onclick="slideMenu()">
    <i class="fas fa-times"></i> <!-- 닫기 아이콘 -->
  </div>
  <ul>
    <!--링크연결하기-->
    <li><a href="reservation.html">예약하기</a></li>
    <li><a href="reservationInquiry.html">예약조회</a></li>
    <li><a href="#">홈페이지</a></li>
  </ul>
</div><!--m-nav-links-->

<div class="overlay"></div>

<div id="r-container" >
  <div class="r-date">
    <label for="reservation-date" class="Q-txt">예약 날짜를 선택하세요</label>
    <input type="text" id="reservation-date" name="reservation-date">
  </div><!--  r-date-->

  <div class="r-time hidden2" >
    <h1 class="Q-txt">예약 시간을 선택하세요</h1>
    <div class="time-select">
      <div>
        <input class="reservationTime" type="radio" id="reservation-time1" name="reservation-time" value="오전 10시 ~ 오후 1시">
        <label for="reservation-time1">오전 10시 ~ 오후 1시</label>
      </div>
      <div>
        <input class="reservationTime" type="radio" id="reservation-time2" name="reservation-time" value="오후 2시 ~ 오후 5시">
        <label for="reservation-time2">오후 2시 ~ 오후 5시</label>
      </div>
      <div>
        <input class="reservationTime" type="radio" id="reservation-time3" name="reservation-time" value="오후 4시 ~ 오후 7시">
        <label for="reservation-time3">오후 4시 ~ 오후 7시</label>
      </div>
      <div>
        <input class="reservationTime" type="radio" id="reservation-time4" name="reservation-time" value="오후 6시 ~ 오후 9시">
        <label for="reservation-time4">오후 6시 ~ 오후 9시</label>
      </div>
    </div>
  </div><!--  r-time-->
  <div class="r-info hidden2">
    <h1 class="Q-txt">예약자 정보를 입력하세요</h1>
    <div class="info-select">
      <div class="info-group">
        <label for="name">이름 : </label>
        <input class="reserInfo" type="text" id="name" name="name" placeholder="이름을 입력하세요">
      </div>
      <div class="info-group">
        <label for="phone">연락처 : </label>
        <input class="reserInfo" type="tel" id="phone" name="phone" placeholder="010-1234-5678">
      </div>
      <div class="info-group">
        <label for="email">이메일 : </label>
        <input class="reserInfo" type="email" id="email" name="email" placeholder="example@domain.com">
      </div>
    </div>
  </div><!--  r-info-->

  <div class="r-addr hidden2">
    <h1 class="Q-txt">주소를 입력하세요</h1>
    <div class="addr-input">
      <div>
        <input class="addr-input-top" type="text" id="postcode" placeholder="우편번호" readonly>
        <input class="addr-input-top2" type="button" onclick="openDaumPostcode()" value="🔍검색"><br>
        <input class="reserAddr addr-input-bot" type="text" id="address" placeholder="주소" readonly><br>
        <input class="reserAddr addr-input-bot" type="text" id="detailAddress" placeholder="상세주소">
      </div>
    </div>
  </div><!--  r-addr-->

  <div class="r-model hidden2">
    <h1 class="Q-txt">제빙기 정보를 알려주세요</h1>
    <div class="model-input">
      <input type="text" name="modelname" id="modelname" placeholder="브랜드명 / 모델번호">
    </div>
  </div><!--r-model-->

  <div class="r-capacity hidden2">
    <h1 class="Q-txt">제빙기 용량을 알려주세요</h1>
    <div class="capacity-input">
      <div>
        <input class="capainput" type="radio" name="capacity" id="capacity" value="1">
        <label class="capalabel" for="capacity">20~50kg</label>
      </div>
      <div>
        <input class="capainput" type="radio" name="capacity" id="capacity1" value="2">
        <label class="capalabel" for="capacity1">50~100kg </label>
      </div>
      <div>
        <input class="capainput" type="radio" name="capacity" id="capacity2" value="3">
        <label class="capalabel" for="capacity2">100kg 이상</label>
      </div>
    </div>

  </div><!--r-capacity-->

  <div class="r-selectServ hidden2">
    <h1 class="Q-txt">원하시는 서비스를 선택하세요</h1>
    <div class="selectServ-input">
      <div>
        <input class="selectServ" type="radio" name="serviceSelect" id="serviceSelect-clean" value="청소">
        <label for="serviceSelect-clean">청소</label>
      </div>
      <div>
        <input class="selectServ" type="radio" name="serviceSelect" id="serviceSelect-rep" value="수리">
        <label for="serviceSelect-rep">수리</label>
      </div>
    </div>
  </div><!--  r-selectServ-->

  <div class="r-selectCyc hidden2">
    <h1 class="Q-txt">서비스 주기를 선택하세요</h1>
    <div class="selectCyc-input">
      <div>
        <input class="selectCyc" type="radio" name="cycleSelect" id="cycleSelect-once" value="이번 한 번만">
        <label for="cycleSelect-once" >이번 한 번만</label>
      </div>
      <div>
        <input class="selectCyc" type="radio" name="cycleSelect" id="cycleSelect-month" value="한 달에 한 번">
        <label for="cycleSelect-month">한 달에 한 번 ( 10 ~ 15% 할인) </label>
      </div>
    </div>
  </div><!--    r-selectCyc-->

  <div class="r-selectAdd hidden2">
    <h1 class="Q-txt">원하시는 추가 서비스를 선택하세요</h1>
    <div class="selectAdd-input">
      <div>
        <input class="selectAdd" type="radio" name="addSelect" id="addSelect-deep" value="심화 청소">
        <label for="addSelect-deep">심화 청소 ( + 10만 원 ~ 20만 원)</label>
      </div>
      <div>
        <input class="selectAdd" type="radio" name="addSelect" id="addSelect-tank" value="물탱크 청소">
        <label for="addSelect-tank">물탱크 청소 ( + 3만 원 ~ 10만 원)</label>
      </div>
      <div>
        <input class="selectAdd" type="radio" name="addSelect" id="addSelect-filter" value="필터 교체">
        <label for="addSelect-filter">필터 교체 ( + 2만 원 ~ 10만 원)</label>
      </div>
      <div>
        <input class="selectAdd" type="radio" name="addSelect" id="addSelect-none" value="선택 안함">
        <label for="addSelect-none">선택 안함</label>
      </div>
    </div>
  </div><!--    r-selectAdd-->

  <div class="r-Special hidden2">
    <h1 class="Q-txt">특별 요청사항을 입력하세요</h1>
    <div class="special-input">
      <textarea name="SpecialRequest" id="specialR" cols="30" rows="10" placeholder="예 ) 제빙기 상태나 장소에 대한 설명"></textarea>
    </div>
  </div><!--    r-Special-->

  <div class="price-table hidden2">
    <div class="table-body">
      <h1 class="table-tit">제빙기 청소 비용 안내판</h1>
      <table>
        <thead>
        <tr>
          <th>항목</th>
          <th>내용</th>
          <th>비용 (소형 ~ 중형)</th>
          <th>비용 (대형)</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td>기본 청소</td>
          <td>외부 세척, 얼음 틀 청소, 간단 소독</td>
          <td>5만 원 ~ 10만 원</td>
          <td>+2만 원 ~ 5만 원</td>
        </tr>
        <tr>
          <td>심화 청소</td>
          <td>내부 분해, 곰팡이 제거, 철저 소독</td>
          <td>10만 원 ~ 15만 원</td>
          <td>+2만 원 ~ 5만 원</td>
        </tr>
        <tr>
          <td>물탱크 청소</td>
          <td>물탱크 세척, 물때 제거, 소독</td>
          <td>3만 원 ~ 5만 원</td>
          <td>5만 원 이상</td>
        </tr>
        <tr>
          <td>필터 교체</td>
          <td>필터 교체 (부품비 별도)</td>
          <td>2만 원 ~ 4만 원</td>
          <td>3만 원 ~ 7만 원</td>
        </tr>
        <tr>
          <td>필터 교체 (부품 포함)</td>
          <td>필터 교체 + 부품비 포함</td>
          <td>3만 원 ~ 7만 원</td>
          <td>5만 원 이상</td>
        </tr>
        </tbody>
      </table>
      <div>

        <div class="notes">
          <h3 class="notes-toggle"> ⭐ 꼭 확인해 주세요 (click) ⭐ </h3>
          <div class="notes-content">
            <div class="total-cost">
              <h3 style="margin-bottom: 5px; font-weight: bold">[예상 비용]</h3>
              <p>소형 제빙기 (20~50kg): 기본 청소 + 물탱크 + 필터 교체 <br/> = <strong>10만 원 ~ 15만 원</strong></p>
              <p>중형 제빙기 (50~100kg): 심화 청소 + 물탱크 + 필터 교체 <br/> = <strong>15만 원 ~ 20만 원</strong></p>
              <p>대형 제빙기 (100kg 이상): 심화 청소 + 물탱크 + 필터 교체 <br/> = <strong>20만 원 ~ 30만 원</strong></p>
            </div>
            <p>- <strong>지역 차이:</strong> 서울이나 수도권은 10~20% 정도 추가요금이 발생할 수 있습니다.</p>
            <p>- <strong>추가 요금:</strong> 오염이 심한 경우 추가요금이 발생할 수 있습니다.</p>
            <p style="color: darkred; margin: 8px 0 8px; font-weight: bold;">- 비용은 상황에 따라 변동됩니다. 이에 따라 추가 요금이 발생할 수 있으며, 안내된 금액과 다를 수 있습니다.<br/>
              - 예약금을 입금해야 예약이 완료되며, 이후 서비스가 시작됩니다.<br/>
              - 현장에서 견적을 확인한 후, 총액에서 예약금을 제외한 잔액을 결제하면 서비스가 제공됩니다.<br/>
              - 다만, 현장 견적 후 예약을 취소하면 예약금은 환불되지 않습니다. 또한, 위치에 따른 추가요금이 부과될 수 있습니다.</p>

            <p>- <strong>견적 문의:</strong> 정확한 비용은 빠른상담 이용(☎1234-5678) 부탁드립니다.</p>

          </div>
        </div><!--  notes-->

      </div>
    </div>
  </div><!--  price-table-->


  <div class="reserBtn hidden2">
    <div>
      <input class="resercheck-input" type="checkbox" name="resercheck" id="resercheck">
      <label class="resercheck-label" for="resercheck">모든 내용을 확인했습니다.</label>
    </div>
    <button id="confirm-reserve">예약하기</button>
  </div>
</div> <!--r-container-->


<div class="modal hidden2">
  <div class="r-check">
    <h1 class="Q-txt animate-bounce">예약 내용을 확인해주세요</h1>
    <div class="check-input">
      <div>
        <label>이름</label>
        <div class="check-info-name"></div>
      </div>
      <div class="underline"></div>
      <div>
        <label>연락처</label>
        <div class="check-info-phone"></div>
      </div>
      <div>
        <label>이메일</label>
        <div class="check-info-email"></div>
      </div>
      <div>
        <label>예약 날짜</label>
        <div class="check-date"></div>
      </div>
      <div>
        <label>예약 시간</label>
        <div class="check-time"></div>
      </div>
      <div>
        <label>우편번호</label>
        <div class="check-addr-post"></div>
      </div>
      <div>
        <label>주소</label>
        <div style="display: flex; flex-direction: column;">
          <div class="check-addr-addr"></div>
          <div class="check-addr-deta"></div>
        </div>
      </div>
      <div>
        <label>제빙기 정보</label>
        <div class="check-model"></div>
      </div>
      <div>
        <label>제빙기 용량</label>
        <div class="check-capacity"></div>
      </div>
      <div>
        <label>선택 서비스</label>
        <div class="check-select-ser"></div>
      </div>
      <div>
        <label>서비스 주기</label>
        <div class="check-select-cyc"></div>
      </div>
      <div>
        <label>추가 서비스</label>
        <div class="check-select-add"></div>
      </div>
      <div>
        <label>특별 요청사항</label>
        <div class="check-special"></div>
      </div>
      <div>
        <label>예약금</label>
        <div class="check-deposit"></div>
      </div>
    </div>

    <div>
      <input type="checkbox" name="privacy" id="privacy" class="cursor-pointer">
      <label class="agree" for="privacy">개인정보 제공에 동의합니다 </label>
      <button class="privacy-detail-btn">[보기]</button>
    </div>
    <div class="privacy-details" id="privacy-details">
      <p><strong>1. 개인정보 수집 및 이용 목적</strong><br>
        ICECARE는 제빙기 청소 및 수리 서비스 예약, 제공, 고객 문의 응대, 품질 향상을 위해 개인정보를 수집·이용합니다.</p>
      <p><strong>2. 수집하는 개인정보 항목</strong><br>
        - 필수: 성명, 연락처, 이메일, 서비스 주소, 예약 일시, 제빙기 모델명, 서비스 요청 세부 사항 등</p>
      <p><strong>3. 보유 및 이용 기간</strong><br>
        서비스 제공 완료 후 1년 (법령에 따른 보존 기간 예외)</p>
      <p><strong>4. 개인정보 제공</strong><br>
        - 제공받는 자: ICECARE 협력업체, 제빙기 제조사<br>
        - 목적: 예약 조율, 현장 서비스, 부품 수급<br>
        - 항목: 성명, 연락처, 주소, 모델명</p>
      <p><strong>5. 동의 철회</strong><br>
        언제든지 동의를 철회하거나 열람·정정을 요청할 수 있습니다 (고객센터: 1234-5678)</p>
    </div>
    <div>
      <button class="privacy-no">취소</button>
      <button class="privacy-ok">확인</button>
    </div>
    
    <div>
      
    </div>

  </div>


  <script>
    function slideMenu() {
      const navLinks = document.querySelector('.m-nav-links');
      const overlay = document.querySelector('.overlay');

      navLinks.classList.toggle('active');
      overlay.classList.toggle('active');
    }


    flatpickr("#reservation-date", {
      locale: "ko",  // 한국어로 설정
      dateFormat: "Y-m-d",  // 날짜 포맷 설정
      minDate: "today",  // 오늘 이후 날짜만 선택 가능
      maxDate: new Date().fp_incr(90),  // 오늘 포함 3달 이후 날짜까지만 선택 가능
      inline: true,  // 달력을 항상 화면에 표시
      closeOnSelect: false,  // 날짜 선택 후에도 달력이 사라지지 않도록 설정
      // onChange: function(selectedDates, dateStr, instance) {
      //   console.log("선택한 날짜: " + dateStr);  // 선택한 날짜 출력
      // }
    });


    function openDaumPostcode() {
      new daum.Postcode({
        oncomplete: function(data) {
          // 팝업에서 검색 결과 항목을 클릭했을 때 실행할 코드
          var addr = ''; // 주소 변수

          // 사용자가 선택한 주소 타입에 따라 주소 값을 가져옴
          if (data.userSelectedType === 'R') { // 도로명 주소
            addr = data.roadAddress;
          } else { // 지번 주소
            addr = data.jibunAddress;
          }

          // 우편번호와 주소 필드에 값 입력
          document.getElementById('postcode').value = data.zonecode;
          document.getElementById('address').value = addr;

          // 상세주소 입력란으로 커서 이동
          document.getElementById('detailAddress').focus();
        }
      }).open();
    }

    document.querySelector('.notes-toggle').addEventListener('click', function() {
      const content = document.querySelector('.notes-content');
      if (content.style.display === 'block') {
        content.style.display = 'none';
      } else {
        content.style.display = 'block';
      }
    });


  </script>
  <script src="ex01.js"></script>
</body>
</html>
