<!DOCTYPE html>
<html>
<head>
    <style>
        .box {
            width: 100px;
            height: 100px;
            background-image: url("./nunu.jpg") ;
            background-size : cover;
            border: 5px solid orange;
            border-radius: 40px;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div class="box"></div>
<script>

    // ë“œëž˜ê·¸ ëŒ€ìƒ ìš”ì†Œ
    const $box = document.querySelector('.box');

    // ë“œëž˜ê·¸ ì‹œìž‘ ì‹œì ì˜ ë§ˆìš°ìŠ¤ í¬ì¸í„° ìœ„ì¹˜
    const initialMousePos = { x: 0, y: 0 };
    // ì˜¤í”„ì…‹: ì´ë™í•  ê±°ë¦¬
    const offset = { x: 0, y: 0 };

    // mousemove ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    const move = e => {
        // ì˜¤í”„ì…‹ = í˜„ìž¬(ë“œëž˜ê·¸í•˜ê³  ìžˆëŠ” ì‹œì ) ë§ˆìš°ìŠ¤ í¬ì¸í„° ìœ„ì¹˜ - ë“œëž˜ê·¸ ì‹œìž‘ ì‹œì ì˜ ë§ˆìš°ìŠ¤ í¬ì¸í„° ìœ„ì¹˜
        offset.x = e.clientX - initialMousePos.x;
        offset.y = e.clientY - initialMousePos.y;

        // translate3dëŠ” GPUë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ absoluteì˜ top, leftë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ë¹ ë¥´ë‹¤.
        // top, leftëŠ” ë ˆì´ì•„ì›ƒì— ì˜í–¥ì„ ì¤€ë‹¤.
        $box.style.transform = `translate3d(${offset.x}px, ${offset.y}px, 0)`;
    };

    // ðŸ”½ mousedown ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ë“œëž˜ê·¸ ì‹œìž‘ ì‹œì ì˜ ë§ˆìš°ìŠ¤ í¬ì¸í„° ì¢Œí‘œë¥¼ ì €ìž¥í•œë‹¤.
    $box.addEventListener('mousedown', e => {
        // ì´ë™ ê±°ë¦¬ë¥¼ ê³„ì‚°í•˜ê¸° ìœ„í•´ mousedown ì´ë²¤íŠ¸ê°€ ë°œìƒ(ë“œëž˜ê·¸ë¥¼ ì‹œìž‘)í•˜ë©´
        // ë“œëž˜ê·¸ ì‹œìž‘ ì‹œì ì˜ ë§ˆìš°ìŠ¤ í¬ì¸í„° ì¢Œí‘œ(e.clientX/e.clientY: ë·°í¬íŠ¸ ìƒì—ì„œ í˜„ìž¬
        // ë§ˆìš°ìŠ¤ì˜ í¬ì¸í„° ì¢Œí‘œ)ë¥¼ ì €ìž¥í•´ ë‘”ë‹¤. í•œë²ˆ ì´ìƒ ë“œëž˜ê·¸ë¡œ ì´ë™í•œ ê²½ìš° moveì—ì„œ
        // translate3d(${offset.x}px, ${offset.y}px, 0)ìœ¼ë¡œ ì´ë™í•œ ìƒíƒœì´ë¯€ë¡œ
        // offset.xì™€ offset.yë¥¼ ë¹¼ì£¼ì–´ì•¼ í•œë‹¤.
        initialMousePos.x = e.clientX - offset.x;
        initialMousePos.y = e.clientY - offset.y;

        // mousedown ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ ìƒíƒœì—ì„œ mousemove ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´
        // box ìš”ì†Œë¥¼ ì´ë™ì‹œí‚¨ë‹¤.
        document.addEventListener('mousemove', move);
    });

    // ðŸ”¼ mouseup ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ mousemove ì´ë²¤íŠ¸ë¥¼ ì œê±°í•´ ì´ë™ì„ ë©ˆì¶˜ë‹¤.
    document.addEventListener('mouseup', () => {
        document.removeEventListener('mousemove', move);
    });

    const $body = document.querySelector('body');
    $body.addEventListener('keydown', (e) => {
        console.log(e.key);
        console.log(e.keyCode);
        if (e.key === "ArrowRight") {
            offset.x += 10;
            $box.style.transform = `translate(${offset.x}px, ${offset.y}px)`;
        }
        else if (e.key === "ArrowLeft") {
            offset.x -= 10;
            $box.style.transform = `translate(${offset.x}px, ${offset.y}px)`;
        }
        else if (e.key === "ArrowUp") {
            offset.y -= 10;
            $box.style.transform = `translate(${offset.x}px, ${offset.y}px)`;
        }
        else if (e.key === "ArrowDown") {
            offset.y += 10;
            $box.style.transform = `translate(${offset.x}px, ${offset.y}px)`;
        }
    });
</script>
</body>
</html>